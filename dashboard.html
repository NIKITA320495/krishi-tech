<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                <img src="images/Farm_Fresh-removebg-preview.png" alt="Krishi-Tech Logo" style="width: 70%;">
                <h1>Krishi-Tech</h1>
                <p>One Stop Destination for Farmers</p>
            </div>
            <nav class="nav">
                <ul>
                    <li><img src='images/ramesh.jpg' style="width: 100%;"></li>
                    <li><a href="#">Ramesh Rawat</a></li>
                    <li id="location"><a href="#"></a></li>
                    <li><a href="#">Current Crop: Jackfruit</a></li>
                    <li><a href="#">Explore Services</a></li>
                    <!-- <li><a href="#">News</a></li> -->
                    <li><a href="#">Account</a></li>
                </ul>

            </nav>
        </aside>
        <main class="main-content">
            <section class="market-section">
                <h2 style="font-size: 4rem;">Visualizations</h2>
                <p>Manage your profits and growths... </p>
                <div class="stocks">
                    <div class="stock-card">
                        <div class="stock-info">
                            <h3>Profits</h3>
                            <p>Gains after selling crops</p>
                        </div>
                        <div class="stock-growth">
                            <span>+10%</span>
                            <canvas id="chart1"></canvas>
                        </div>
                    </div>
                    <div class="stock-card">
                        <div class="stock-info">
                            <h3>Yield</h3>
                            <p>Trends in the yield of the produce</p>
                        </div>
                        <div class="stock-growth">
                            <span>+50%</span>
                            <canvas id="chart2"></canvas>
                        </div>
                    </div>
                </div>
                <br>
                <div>
                    <canvas id="weeklyWeatherChart"></canvas>
                </div>
                <br>
                <div>
                    <canvas id="weatherChart"></canvas>
                </div>
            </section>
            <section class="goods-section">
                <h3 style="font-size: 4rem;">Goods</h3>
                <div class="goods-icons">
                    <span>Pesticides</span>
                    <span>Fertilizers</span>
                    <span>Machineries</span>
                    <span>Grains</span>
                    <span>Livestock</span>
                    <span>Cotton</span>
                    <!-- <span>Corn</span> -->
                    <span>Oil</span>
                </div>
            </section>
            <section class="gainers-section">
                <h3 style="font-size: 4rem; align-items: center;">Recommended blogs</h3>
                <span>
                    <h2 style="align-items: center;">Sustainable Farming Practices according to your location</h2>
                </span>
                <div class="gainer">

                    <div class="blog">
                        <p>blog</p>
                    </div>
                </div>
            </section>
            <section class="popular-section">
                <h3 style="font-size: 4rem;">Recommended Products</h3>
               
                    <img class="seeds">
                        <section class="blog1">
                            <section class="box">
                                <div class="content" id="about">
                                    <header class="align-center">
                                    </header>
                                    <hr>
                                    <div class="carousel">
                                        <div class="carousel-track-container">
                                            <ul class="carousel-track">
                                                <li class="carousel-slide current-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/seeds.jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>Rice Seeds</h2>
                                                            </header>
                                                            <hr>
                                                            <p>Best rice seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/kidney-beans.jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>KIDNEY BEANS</h2>
                                                            </header>
                                                            <hr>
                                                            <p>Best kidneybeans seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/fertilizer (2).jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>FERTILIZER</h2>

                                                            </header>
                                                            <hr>
                                                            <p>Best fertilizer</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/wheat.jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>WHEAT SEEDS</h2>

                                                            </header>
                                                            <hr>
                                                            <p>Best wheat seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/jute" class="product" alt="" width="3472"
                                                                height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>JUTE SEEDS</h2>

                                                            </header>
                                                            <hr>
                                                            <p>Best jute seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/coffee.jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>COFFEE BEANS</h2>

                                                            </header>
                                                            <hr>
                                                            <p>Best coffee seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="carousel-slide">
                                                    <div class="box">
                                                        <div class="image fit">
                                                            <img src="images/maize.jpg" class="product" alt=""
                                                                width="3472" height="1236">
                                                        </div>
                                                        <div class="content">
                                                            <header class="align-center">
                                                                <h2>MAIZE SEEDS</h2>

                                                            </header>
                                                            <hr>
                                                            <p>Best maize seeds</p>
                                                            <p>Rs 99/kg</p>
                                                            <ul class="actions">
                                                                <li><a href="read_more.html" class="button alt">Add to
                                                                        Cart</a></li>
                                                                <li><a href="read_more.html" class="button alt">Buy
                                                                        Now</a></li>

                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="carousel-buttons">
                                            <button class="carousel-button left"><i
                                                    class="fa-solid fa-chevron-left"></i></button>
                                            <button class="carousel-button right"><i
                                                    class="fa-solid fa-chevron-right"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </section>
                        <h1 class="align-center"style="font-size: 3rem;">connect with experts</h1>
                        <img style="width: 100%;"  src="https://www.agrirs.co.uk/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeFJVRHc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--3a0d5eb12c6d822f149c5e66dcaef412a4b3ab35/iStock_1211406255.jpg">
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="dashboard.js"></script>
    <script type="importmap">
        {
          "imports": {
            "@google/generative-ai": "https://esm.run/@google/generative-ai"
          }
        }
      </script>
    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        // Function to fetch weather data from OpenWeatherMap API
        async function getWeatherData(city) {
            const apiKey = 'c22109f9a9c43b3bf6aed69688189ec6';
            const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
            const response = await fetch(apiUrl);
            const data = await response.json();
            return data;
        }

        // Function to get an answer from Google Generative AI based on a prompt
        async function getAnswer(location) {
            const genAI = new GoogleGenerativeAI("AIzaSyBtd4jGDayYjdx0gGJYYwaFHFgdenCLQZg");
            const model = genAI.getGenerativeModel({ model: "gemini-pro" });

            // Fetch weather data for a specific city (e.g., "London")
            const weatherData = await getWeatherData("London");
            const weatherDescription = weatherData.weather[0].description;
            const temperature = weatherData.main.temp;

            // Create a prompt including weather information
            const prompt = `Current weather in ${location} is ${weatherDescription} with a temperature of ${temperature}°C. What are the best practices for sustainable farming considering these weather conditions?`;

            // Generate content based on the prompt
            const result = await model.generateContent(prompt);
            const response = await result.response;
            const text = await response.text();

            console.log(text);
            const blogElements = document.getElementsByClassName("blog");
        for (let i = 0; i < blogElements.length; i++) {
            blogElements[i].innerText = text;
        }
        }

        // Observe changes to the location element
        const locationElement = document.getElementById("location");
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    const updatedLocation = locationElement.innerText.trim();
                    console.log(`Updated location: ${updatedLocation}`);
                    if (updatedLocation) {
                        getAnswer(updatedLocation);
                    }
                }
            });
        });

        // Configure the observer to look for childList changes
        observer.observe(locationElement, { childList: true });

        // Optionally, start with the current value if it exists
        const initialLocation = locationElement.innerText.trim();
        if (initialLocation) {
            getAnswer(initialLocation);
        }
    </script>
</body>



</html>